MAKEFLAGS += --no-builtin-rules
GCC_OPTS = -fno-stack-protector -no-pie

vuln.elf: vuln.c
	gcc $(GCC_OPTS) vuln.c -o vuln.elf

vuln:
	wget https://artifacts.picoctf.net/c/193/vuln
	chmod +x vuln

flag.txt: vuln.elf
	echo "Instance needs to be started and address updated..."
	./exploit_vuln.py saturn.picoctf.net 51487 > flag.txt

clean:
	rm -f vuln.elf vuln flag.txt payload
